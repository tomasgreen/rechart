(function(){"use strict";function t(t){if(t)for(;t.firstChild;)t.removeChild(t.firstChild)}function i(t){return t&&t.parentNode?void t.parentNode.removeChild(t):void 0}function e(t,i,e){var s;if(-1!==t.indexOf(".")){var o=t.split(".");t=o[0],s=document.createElementNS("http://www.w3.org/2000/svg",o[0]),o.shift(),s.setAttribute("class",o.join(" "))}else s=document.createElementNS("http://www.w3.org/2000/svg",t);for(var n in i)s.setAttribute(n,i[n]);return e&&e.appendChild(s),s}function s(t,i){void 0===i&&(i=12);for(var e=[],s=0;s<t.length-1;s++){var o=[t[s-1],t[s],t[s+1],t[s+2]];t.length-2===s?o[3]=o[2]:s||(o[0]={x:+o[1].x,y:+o[1].y}),e.push([(-o[0].x+i*o[1].x+o[2].x)/i,(-o[0].y+i*o[1].y+o[2].y)/i,(o[1].x+i*o[2].x-o[3].x)/i,(o[1].y+i*o[2].y-o[3].y)/i,o[2].x,o[2].y])}return e}function o(t,i,e,s){if(t&&(0!==t.length||t==window))if(void 0===s&&(s=!1),t.length)for(var n=0;n<t.length;n++)o(t[n],i,e,s);else{var a=i.split(" ");for(var h in a)t.addEventListener(a[h],e,s)}}function n(t){return parseInt(t,10)}function a(t){var i=[];for(var e in t)i=i.concat(t[e].data);return Math.max.apply(Math,i)}function h(t){for(var i=[],e=1;e<t.length;e++)i.push("L"+t[e].x+","+t[e].y);return i.join(" ")}var r={minHeight:0,maxHeight:1/0,ratio:void 0,keepRatio:!0,contentOffsetTop:10,contentOffsetRight:10,contentOffsetBottom:10,contentOffsetLeft:10,tooltipOffset:10,tickOffset:8,touchDelay:300,lockScrollOnTouchPress:!0,textSpacing:4,bezier:!1,bezierDenominator:9,click:void 0,responsive:!0,reduceData:!0,labelOutside:!1,reduceXAxisLabel:!0,circleRadius:4,circleRadiusHover:8,xAxisGridFollowLabel:!1,xAxisGridMinDistance:34,xAxisMinDistance:17,xAxisNumerals:!0,yAxisMinDistance:30,showXAxisLabel:!0,showXAxisGrid:!0,showXAxisLine:!0,showYAxisLabel:!0,showYAxisGrid:!0,showYAxisLine:!0,showBar:!1,showArea:!0,showLine:!0,showCircle:!0,showTooltip:!0,showXAxisGuideline:!0,sizeMedium:768,sizeLarge:992},l=function(t,s){if(t.element&&t.dataset&&t.xAxis){var n=this;this.isTouch="ontouchstart"in document.documentElement,this.opt={};for(var h in r)this.opt[h]=void 0!==s[h]?s[h]:r[h];this.element=t.element,this.xAxis=[],this.dataset=t.dataset,this.largest=a(this.dataset),this.vars={};var l=e("text.xaxis-tick-text",{style:"visiblility: hidden"},this.element);for(h in t.xAxis)this.xAxis[h]=this.createLabel(t.xAxis[h],l);if(this.opt.showBar&&(void 0===s.labelOutside&&(this.opt.labelOutside=!0),void 0===s.xAxisMinDistance&&(this.opt.xAxisMinDistance=this.opt.xAxisGridMinDistance)),this.opt.bezier&&this.xAxis.length<3&&(this.opt.bezier=!1),this.opt.labelOutside){var d=e("text.yaxis-tick-text",{style:"visiblility: hidden"},this.element);d.textContent=this.yAxisText(this.orderOfMagnitude())+this.opt.textSpacing,this.opt.showXAxisLabel&&(this.opt.contentOffsetLeft+=d.clientWidth),this.opt.showYAxisLabel&&(this.opt.contentOffsetBottom=l.clientHeight),i(d)}i(l),this.xAxisCount=this.xAxis.length,void 0===this.opt.ratio&&(this.opt.ratio=this.element.clientHeight/this.element.clientWidth,isNaN(this.opt.ratio)&&(this.opt.ratio=this.element.getAttribute("height")/this.element.getAttribute("width")));for(var x in this.dataset)this.dataset[x].color&&(this.dataset[x].circleClass||(this.dataset[x].circleClass="fill-"+this.dataset[x].color),this.dataset[x].barClass||(this.dataset[x].barClass="fill-"+this.dataset[x].color),this.dataset[x].lineClass||(this.dataset[x].lineClass="stroke-"+this.dataset[x].color),this.dataset[x].tooltipClass||(this.dataset[x].tooltipClass="bg-"+this.dataset[x].color),this.dataset[x].pathClass||(this.dataset[x].pathClass="fill-"+this.dataset[x].color));o(this.element.parentNode,"touchmove mousemove",function(t){(!n.isTouch||n.isHovering)&&n.move(t)}),o(this.element.parentNode,"touchend mouseleave",function(t){setTimeout(function(){n.isHovering=!1,n.isPressing=!1,n.leave(t),n.hoverTimeout&&clearTimeout(n.hoverTimeout)},n.isTouch?10:0)}),o(this.element.parentNode,"touchstart mouseenter",function(t){n.isPressing=!0,n.hoverTimeout=setTimeout(function(){n.isPressing&&(n.isHovering=!0,n.move(t))},n.isTouch?n.opt.touchDelay:0)}),o(this.element.parentNode,"click",function(t){n.click(t)}),o(document,"touchmove",function(t){n.isHovering&&n.opt.lockScrollOnTouchPress&&t.preventDefault()}),o(window,"resize",function(){n.opt.responsive&&n.draw()}),o(window,"orientationchange",function(){var t=document.querySelectorAll("div.rechart-tooltip");for(var e in t)i(t[e]);n.elements.tooltip=void 0}),this.draw()}};l.prototype.draw=function(t){this.prepare(t)&&(this.elements.gridGroup=e("g",{transform:"translate(0.5,0.5)"},this.element),this.opt.showXAxisGrid&&this.drawXAxisGrid(),this.opt.showYAxisGrid&&this.drawYAxisGrid(),this.opt.showXAxisLabel&&this.drawXAxisGridTick(this.opt.showBar),this.opt.showYAxisLabel&&this.drawYAxisGridTick(),this.opt.showXAxisLine&&this.drawXAxisLine(),this.opt.showYAxisLine&&this.drawYAxisLine(),this.elements.dataGroup=e("g",null,this.element),this.opt.showBar&&this.drawBar(),this.opt.showArea&&this.drawArea(),this.opt.showLine&&this.drawLine(),this.opt.showCircle&&this.drawCircle())},l.prototype.prepare=function(i){var e={elementWidth:0,elementHeight:0,containerWidth:this.element.parentNode.clientWidth,chartWidth:0,chartHeight:0,xAxisVisibleCount:this.xAxisCount,xAxisVisibleCountStart:0,xAxisVisibleLabelMod:1,xAxisGridMod:1,xAxisPadding:0,yAxisInterval:0,yAxisPadding:0,yAxisScale:0,yAxisVisibleCount:0};if(this.elementBoundingRect=void 0,!i&&this.opt.responsive&&(this.previousContainerWidth==e.containerWidth||isNaN(e.containerWidth)||e.containerWidth<1))return!1;if(t(this.element),this.vars=e,this.elements={},this.previousContainerWidth=e.containerWidth,this.opt.responsive)if(e.elementWidth=this.previousContainerWidth,this.element.setAttribute("width",e.elementWidth),this.opt.keepRatio){var s=n(e.elementWidth*this.opt.ratio);s>=this.opt.minHeight&&s<=this.opt.maxHeight?e.elementHeight=s:s>this.opt.maxHeight?e.elementHeight=this.opt.maxHeight:s<this.opt.minHeight&&(e.elementHeight=this.opt.minHeight),this.element.setAttribute("height",e.elementHeight)}else e.elementHeight=this.element.clientHeight;else e.elementWidth=this.element.clientWidth,e.elementHeight=this.element.clientHeight;if(e.chartWidth=e.elementWidth-this.opt.contentOffsetLeft-this.opt.contentOffsetRight,e.chartHeight=e.elementHeight-this.opt.contentOffsetTop-this.opt.contentOffsetBottom,this.opt.reduceData&&n(e.chartWidth/this.opt.xAxisMinDistance)<this.xAxisCount&&(e.xAxisVisibleCount=n(e.chartWidth/this.opt.xAxisMinDistance),e.xAxisVisibleCountStart=this.xAxisCount-e.xAxisVisibleCount),this.opt.showXAxisLabel&&this.opt.reduceXAxisLabel){var o=0;for(var a in this.xAxis)o+=this.xAxis[a].getWidth();var h=n(e.xAxisVisibleCount/(e.chartWidth/(o/this.xAxisCount)))+1;h>1&&(e.xAxisVisibleLabelMod=h)}var r=n(e.xAxisVisibleCount/(e.chartWidth/this.opt.xAxisGridMinDistance))+1;return r>1&&(e.xAxisGridMod=r),e.xAxisPadding=e.chartWidth/(e.xAxisVisibleCount-(this.opt.showBar?0:1)),e.yAxisVisibleCount=n(e.chartHeight/this.opt.yAxisMinDistance),e.yAxisPadding=e.chartHeight/e.yAxisVisibleCount,e.yAxisInterval=this.orderOfMagnitude()/e.yAxisVisibleCount,e.yAxisScale=e.chartHeight/(e.yAxisInterval*e.yAxisVisibleCount),!0},l.prototype.drawLine=function(){this.drawPath(!1)},l.prototype.drawArea=function(){this.drawPath(!0)},l.prototype.drawBar=function(){this.elements.bars=[];var t=n(this.vars.xAxisPadding/this.dataset.length*.8);1>t&&(t=1);for(var i=n((this.vars.xAxisPadding-t*this.dataset.length)/2),s=0;s<this.dataset.length;s++){this.elements.bars[s]=[];for(var o=this.dataset[s],a=this.vars.xAxisVisibleCountStart;a<this.xAxisCount;a++){var h=1+t*s+this.opt.contentOffsetLeft+this.vars.xAxisPadding*(a-this.vars.xAxisVisibleCountStart),r=this.opt.contentOffsetTop+this.vars.chartHeight-o.data[a]*this.vars.yAxisScale,l=this.vars.chartHeight-r+this.opt.contentOffsetTop;this.elements.bars[s][a]=e("rect",{"class":"bar "+o.circleClass,x:h+i-1,y:r-1,width:t,height:l},this.elements.dataGroup)}}},l.prototype.drawPath=function(t){for(var i=0;i<this.dataset.length;i++){for(var o=this.dataset[i],n=[],a=t?"area "+o.pathClass:"line "+o.lineClass,r="M",l=this.vars.xAxisVisibleCountStart;l<this.xAxisCount;l++)n.push({x:this.opt.contentOffsetLeft+this.vars.xAxisPadding*(l-this.vars.xAxisVisibleCountStart),y:this.opt.contentOffsetTop+this.vars.chartHeight-o.data[l]*this.vars.yAxisScale});if(t&&(r+=this.opt.contentOffsetLeft+","+(this.vars.chartHeight+this.opt.contentOffsetTop)+" "),r+=n[0].x+","+n[0].y+" ",this.opt.bezier)for(var d=s(n,this.opt.bezierDenominator),x=0;x<d.length;x++)r+="C"+d[x].join();else r+=h(n);t&&(r+=" L"+(this.vars.chartWidth+this.opt.contentOffsetLeft)+","+(this.vars.chartHeight+this.opt.contentOffsetTop)+" Z");var p=e("path",{"class":a},this.elements.dataGroup);p.setAttribute("d",r)}},l.prototype.drawCircle=function(){this.elements.circles=[];for(var t=0;t<this.dataset.length;t++){this.elements.circles[t]=[];for(var i=this.dataset[t],s=this.vars.xAxisVisibleCountStart;s<this.xAxisCount;s++){var o=this.opt.contentOffsetLeft+this.vars.xAxisPadding*(s-this.vars.xAxisVisibleCountStart),n=this.opt.contentOffsetTop+this.vars.chartHeight-i.data[s]*this.vars.yAxisScale;this.elements.circles[t][s]=e("circle",{"class":"circle "+i.circleClass,r:this.opt.circleRadius,cx:o,cy:n},this.elements.dataGroup)}}},l.prototype.drawXAxisGrid=function(){for(var t=this,i=function(i){e("line.xaxis-grid",{x1:i,y1:0,x2:i,y2:t.vars.elementHeight},t.elements.gridGroup)},s=0;s<=this.vars.xAxisVisibleCount;s++)this.opt.xAxisGridFollowLabel&&s%this.vars.xAxisVisibleLabelMod!==0||s%this.vars.xAxisGridMod===0&&i(n(this.opt.contentOffsetLeft+s*this.vars.xAxisPadding))},l.prototype.drawYAxisGrid=function(){for(var t=0;t<this.vars.yAxisVisibleCount;t++){var i=n(this.opt.contentOffsetTop+t*this.vars.yAxisPadding);e("line.yaxis-grid",{x1:this.opt.labelOutside?this.opt.contentOffsetLeft:0,y1:i,x2:this.vars.elementWidth,y2:i},this.elements.gridGroup)}},l.prototype.drawYAxisLine=function(){e("line.xaxis-line",{x1:this.opt.contentOffsetLeft,y1:0,x2:this.opt.contentOffsetLeft,y2:this.vars.elementHeight},this.elements.gridGroup)},l.prototype.drawXAxisLine=function(){var t=n(this.opt.contentOffsetTop+this.vars.yAxisVisibleCount*this.vars.yAxisPadding)-1;e("line.yaxis-line",{x1:0,y1:t,x2:this.vars.elementWidth,y2:t},this.elements.gridGroup)},l.prototype.drawXAxisGridTick=function(t){for(var i=t?0:1,s=t?1:0,o=i;o<this.vars.xAxisVisibleCount-s;o++)if(o%this.vars.xAxisVisibleLabelMod===0){var a=n(this.opt.contentOffsetLeft+o*this.vars.xAxisPadding),h=this.vars.elementHeight-this.opt.contentOffsetBottom,r=this.vars.elementHeight-this.opt.contentOffsetBottom,l=this.vars.elementHeight-this.opt.contentOffsetBottom;if(this.opt.labelOutside?(r+=this.opt.tickOffset,l=r+this.opt.tickOffset+this.opt.textSpacing):(h-=this.opt.tickOffset,l-=this.opt.tickOffset+this.opt.textSpacing),t){var d=e("text.xaxis-tick-text",{x:a+this.vars.xAxisPadding/2,y:l-this.opt.tickOffset},this.elements.gridGroup);d.textContent=this.xAxis[o+this.vars.xAxisVisibleCountStart].getValue()}else{e("line.xaxis-tick",{x1:a,y1:h,x2:a,y2:r},this.elements.gridGroup);var d=e("text.xaxis-tick-text",{x:a,y:l},this.elements.gridGroup);d.textContent=this.xAxis[o+this.vars.xAxisVisibleCountStart].getValue()}}},l.prototype.drawYAxisGridTick=function(){for(var t=0;t<this.vars.yAxisVisibleCount;t++){var i,s,o=n(this.opt.contentOffsetTop+t*this.vars.yAxisPadding),a=this.opt.contentOffsetLeft;this.opt.labelOutside?(s=this.opt.contentOffsetLeft-this.opt.tickOffset,i=a-this.opt.textSpacing-this.opt.tickOffset):(s=this.opt.contentOffsetLeft+this.opt.tickOffset,i=this.opt.contentOffsetLeft+this.opt.tickOffset+this.opt.textSpacing),e("line.yaxis-tick",{x1:a,y1:o,x2:s,y2:o},this.elements.gridGroup);var h=e("text.yaxis-tick-text",{x:i,y:o+this.opt.textSpacing},this.elements.gridGroup);h.textContent=this.yAxisText(this.vars.yAxisInterval*(this.vars.yAxisVisibleCount-t)),this.opt.labelOutside&&h.setAttribute("x",i-h.clientWidth)}},l.prototype.move=function(t){this.elementBoundingRect||(this.elementBoundingRect=this.element.getBoundingClientRect());var i=this.dataIndexFromEvent(t);i>=this.xAxisCount||0>i||this.vars.lastDataIndex!=i&&(this.opt.showXAxisGuideline&&(this.removeXAxisGuideline(),this.drawXAxisGuideline(i)),this.opt.showTooltip&&(this.drawTooltip(i),this.positionTooltip(t,i)),this.vars.lastDataIndex=i)},l.prototype.leave=function(){this.opt.showXAxisGuideline&&this.removeXAxisGuideline(),this.elements.tooltip&&(this.elements.tooltip=i(this.elements.tooltip)),this.vars.lastDataIndex=void 0},l.prototype.click=function(t){if(this.opt.click){var i=this.dataIndexFromEvent(t);if(!(i>=this.xAxisCount||0>i)){var e=[];for(var s in this.dataset)e.push({data:this.dataset[s].data[i],color:this.dataset[s].color,label:this.dataset[s].label});this.opt.click(this.xAxis[i],e,i)}}},l.prototype.drawXAxisGuideline=function(t){if(this.opt.showXAxisGuideline){var i=n(this.opt.contentOffsetLeft+this.vars.xAxisPadding*(t-this.vars.xAxisVisibleCountStart));if(this.elements.guidelineGroup){var s=this.elements.guidelineGroup.firstChild;s.setAttribute("x1",i),s.setAttribute("x2",i)}else this.elements.guidelineGroup=e("g",{transform:"translate(0.5,0.5)"}),this.element.insertBefore(this.elements.guidelineGroup,this.elements.dataGroup),e("line.xaxis-guideline",{x1:i,y1:0,x2:i,y2:this.vars.elementHeight},this.elements.guidelineGroup),this.opt.showBar&&e("line.xaxis-guideline",{x1:i+n(this.vars.xAxisPadding),y1:0,x2:i+n(this.vars.xAxisPadding),y2:this.vars.elementHeight},this.elements.guidelineGroup);if(this.opt.showCircle)for(var o=0;o<this.elements.circles.length;o++){var a=this.elements.circles[o][t];a&&a.setAttribute("r",this.opt.circleRadiusHover)}}},l.prototype.removeXAxisGuideline=function(){if(this.opt.showXAxisGuideline&&void 0!==this.vars.lastDataIndex&&(this.elements.guidelineGroup&&(this.elements.guidelineGroup=i(this.elements.guidelineGroup)),this.opt.showCircle))for(var t=0;t<this.elements.circles.length;t++){var e=this.elements.circles[t][this.vars.lastDataIndex];e&&e.setAttribute("r",this.opt.circleRadius)}},l.prototype.dataIndexFromEvent=function(t){var i=this.opt.showBar?0:this.vars.xAxisPadding/2,e=t.pageX-this.elementBoundingRect.left,s=n(this.opt.contentOffsetLeft-i),o=n(this.vars.chartWidth+i+this.opt.contentOffsetRight);return s>e?this.vars.xAxisVisibleCountStart:e>o?this.xAxisCount-1:this.vars.xAxisVisibleCountStart+n((e-s)/this.vars.xAxisPadding)},l.prototype.drawTooltip=function(t){for(var i='<div class="yaxis-label">'+this.xAxis[t].tooltip+"</div>",e=0;e<this.dataset.length;e++)i+='<div class="data-wrapper">',i+='<div class="data-color '+this.dataset[e].tooltipClass+'"></div>',i+='<div class="data-label">'+this.dataset[e].label+" </div>",i+='<div class="data-value">'+this.dataset[e].data[t]+"</div>",i+="</div>";this.elements.tooltip||(this.elements.tooltip=document.createElement("div"),this.elements.tooltip.setAttribute("class","rechart-tooltip"),this.element.parentNode.insertBefore(this.elements.tooltip,this.element.parentNode.firstChild)),this.elements.tooltip.innerHTML=i,this.vars.tooltipWidth=this.elements.tooltip.clientWidth},l.prototype.positionTooltip=function(t,i){if(this.elements.tooltip){var e=(i-this.vars.xAxisVisibleCountStart)*this.vars.xAxisPadding+this.opt.contentOffsetLeft;e+this.vars.tooltipWidth+this.opt.tooltipOffset+(this.opt.showBar?this.vars.xAxisPadding:0)>this.vars.chartWidth?(e-=this.vars.tooltipWidth+this.opt.tooltipOffset,0>e&&(e=this.opt.contentOffsetLeft)):e+=this.opt.tooltipOffset+(this.opt.showBar?this.vars.xAxisPadding:0),this.elements.tooltip.setAttribute("style","top: 0px; left:"+e+"px")}},l.prototype.orderOfMagnitude=function(){var t=n(this.largest).toString().length-2,i=Math.ceil(this.largest/Math.pow(10,t))*Math.pow(10,t);return 0===i?1:i},l.prototype.yAxisText=function(t){var i="";return this.opt.xAxisNumerals&&(t>1e6?(t/=1e6,i="m"):t>1e3&&(t/=1e3,i="k")),(1>t?t.toFixed(1):n(t))+i},l.prototype.createLabel=function(t,i){var e=this,s=JSON.parse(JSON.stringify(t));return void 0===s.mw&&s.medium&&(i.textContent=s.medium,s.mw=i.clientWidth+this.opt.textSpacing),void 0===s.sw&&s.small&&(i.textContent=s.small,s.sw=i.clientWidth+this.opt.textSpacing),void 0===s.lw&&s.large&&(i.textContent=s.large,s.lw=i.clientWidth+this.opt.textSpacing),s.getValue=function(){return s.large&&e.vars.chartWidth>=e.opt.sizeLarge?s.large:s.medium&&e.vars.chartWidth>=e.opt.sizeMedium?s.medium:s.small},s.getWidth=function(){return s.large&&e.vars.chartWidth>=e.opt.sizeLarge?s.lw:s.medium&&e.vars.chartWidth>=e.opt.sizeMedium?s.mw:s.sw},void 0===s.tooltip&&(s.tooltip=s.getValue()),s},this.rechart=function(t,i){return new l(t,i)},this.rechart.globals=r}).call(this);